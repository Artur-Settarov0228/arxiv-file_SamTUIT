<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>SamTUIT | Talabalar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-gradient {
            background: linear-gradient(135deg, #0f4c81 0%, #1565a3 50%, #0b6cb8 100%);
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900">

<!-- ================= NAVBAR ================= -->
<nav class="bg-white/90 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200 shadow-sm">
    <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">

        <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-gradient-to-br from-[#0f4c81] to-[#0b6cb8]
                        rounded-xl flex items-center justify-center
                        text-white font-black text-2xl shadow-lg">
                S
            </div>
            <div>
                <h1 class="text-xl font-black text-[#0f4c81] leading-none">SamTUIT</h1>
                <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">
                    Talabalar bo‚Äòlimi
                </p>
            </div>
        </div>

        <div class="hidden md:flex items-center gap-8">
            <a href="#" class="font-semibold text-slate-600 hover:text-[#0f4c81]">Asosiy</a>
            <a href="#" class="font-semibold text-slate-600 hover:text-[#0f4c81]">Qarorlar</a>
            <a href="#" class="font-semibold text-[#0f4c81] border-b-2 border-[#0f4c81] pb-1">Talabalar</a>
            <a href="#" class="font-semibold text-slate-600 hover:text-[#0f4c81]">Xodimlar</a>
            <a href="#" class="font-semibold text-slate-600 hover:text-[#0f4c81]">Bog‚Äòlanish</a>
        </div>
    </div>
</nav>

<!-- ================= HERO ================= -->
<section class="hero-gradient text-white py-20 px-6 relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
        <div class="absolute top-10 left-10 w-72 h-72 bg-white rounded-full blur-3xl"></div>
        <div class="absolute bottom-10 right-10 w-96 h-96 bg-emerald-400 rounded-full blur-3xl"></div>
    </div>

    <div class="max-w-5xl mx-auto text-center relative z-10">
        <h2 class="text-5xl font-black mb-6 leading-tight">
            Filialda tahsil olayotgan <br>
            <span class="bg-gradient-to-r from-emerald-300 to-teal-300 bg-clip-text text-transparent">
                talabalar ro‚Äòyxati
            </span>
        </h2>
        <p class="text-blue-100/80 max-w-2xl mx-auto font-medium">
            Talabalar haqidagi rasmiy ma‚Äôlumotlar bazasi
        </p>
    </div>
</section>

<!-- ================= FILTER ================= -->
<section class="max-w-7xl mx-auto px-6 -mt-16 relative z-10">
    <form method="get"
          class="bg-white rounded-3xl shadow-2xl p-8 grid grid-cols-1 md:grid-cols-6 gap-4">

        <input type="text" name="full_name" value="{{ filters.full_name }}"
               placeholder="F.I.Sh bo‚Äòyicha qidirish"
               class="md:col-span-2 border rounded-xl px-4 py-3">

        <select name="faculty" class="border rounded-xl px-4 py-3">
            <option value="">Fakultet</option>
            <option value="Kompyuter" {% if filters.faculty == "Kompyuter injiniring" %}selected{% endif %}>
                Kompyuter injiniring
            </option>
            <option value="Axborot" {% if filters.faculty == "Axborot texnologiyalari" %}selected{% endif %}>
                Axborot texnologiyalari
            </option>
        </select>

        <input type="text" name="admission_year" value="{{ filters.admission_year }}"
               placeholder="Qabul yili"
               class="border rounded-xl px-4 py-3">

            <input type="text" name="group" value="{{ filters.group }}"
                    placeholder="Guruh"
                    class="border rounded-xl px-4 py-3">

        <button type="submit"
                class="bg-blue-600 text-white font-black rounded-xl px-6 py-3 hover:bg-blue-700">
            üîç Qidirish
        </button>
    </form>
</section>

<!-- ================= ACTION BAR ================= -->
<section class="max-w-7xl mx-auto px-6 pt-20">
    <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-black">Talabalar ro‚Äòyxati</h3>

        <a href="{% url 'talabalar:talabalar_add' %}"
           class="inline-flex items-center gap-2 px-6 py-3 rounded-xl
                  bg-gradient-to-r from-emerald-500 to-teal-500
                  text-white font-black shadow-lg hover:scale-105 transition">
            ‚ûï Talaba qo‚Äòshish
        </a>
    </div>

    <!-- ================= TABLE ================= -->
    <div class="bg-white rounded-3xl shadow-xl overflow-x-auto border">
        <table class="min-w-full text-sm">
            <thead class="bg-slate-100 uppercase text-xs font-black text-slate-600">
                <tr>
                    <th class="px-6 py-4 text-center">‚Ññ</th>
                    <th class="px-6 py-4">F.I.Sh</th>
                    <th class="px-6 py-4">Qabul yili</th>
                    <th class="px-6 py-4">Passport</th>
                    <th class="px-6 py-4">Fakultet</th>
                    <th class="px-6 py-4">Guruh</th>
                    <th class="px-6 py-4">Holati</th>
                    <th class="px-6 py-4">Amallar</th>
                </tr>
            </thead>

            <tbody class="divide-y">
                {% for talaba in talabalar %}
                <tr class="hover:bg-blue-50">
                    <td class="px-6 py-4 text-center font-bold">
                        {{ forloop.counter0|add:page_obj.start_index }}
                    </td>
                    <td class="px-6 py-4 font-semibold">{{ talaba.full_name }}</td>
                    <td class="px-6 py-4" style = "text-align: center">{{ talaba.qabul_yili }}</td>
                    <td class="px-6 py-4" style = "text-align: center">{{ talaba.pasport }}</td>
                    <td class="px-6 py-4" style = "text-align: center">{{ talaba.faculty }}</td>
                    <td class="px-6 py-4 font-bold text-blue-700" style = "text-align: center">{{ talaba.group }}</td>
                    <td class="px-6 py-4" style = "text-align: center">
                        <span class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-xs font-black">
                            {{ talaba.status }}
                        </span>
                    </td>
                    <!-- ================= AMALLAR ================= -->
                    <td class="px-6 py-4 text-center">
                        <div class="flex justify-center gap-2">

                            <!-- EDIT -->
                            <a href="{% url "talabalar:talabalar_update" talaba.id %}"
                            class="w-9 h-9 flex items-center justify-center
                                    bg-blue-100 text-blue-700 rounded-lg
                                    hover:bg-blue-200 transition"
                            title="Tahrirlash">
                                ‚úèÔ∏è
                            </a>

                            <!-- DELETE -->
                            <form action="{% url "talabalar:talaba_delete" talaba.id %}"
                                method="post"
                                onsubmit="return confirm('Rostdan ham o‚Äòchirmoqchimisiz?')">
                                {% csrf_token %}
                                <button type="submit"
                                        class="w-9 h-9 flex items-center justify-center
                                            bg-red-100 text-red-700 rounded-lg
                                            hover:bg-red-200 transition"
                                        title="O‚Äòchirish">
                                    üóëÔ∏è
                                </button>
                            </form>

                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center py-10 text-slate-500 font-bold">
                        Talaba topilmadi
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- ================= PAGINATION ================= -->
    {% if page_obj.has_other_pages %}
    <div class="flex justify-center mt-10">
        <div class="flex items-center gap-3">

            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}&{{ filters.urlencode }}"
               class="px-4 py-2 bg-white border rounded-lg hover:bg-slate-100">
                ‚¨Ö Oldingi
            </a>
            {% endif %}

            <span class="font-black text-slate-700">
                Sahifa {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}&{{ filters.urlencode }}"
               class="px-4 py-2 bg-white border rounded-lg hover:bg-slate-100">
                Keyingi ‚û°
            </a>
            {% endif %}

        </div>
    </div>
    {% endif %}
</section>

<!-- ================= FOOTER ================= -->
<footer class="bg-slate-900 text-slate-400 py-6 mt-20 text-center text-xs font-bold">
    ¬© 2025 SamTUIT | Talabalar bo‚Äòlimi
</footer>

</body>
</html>
